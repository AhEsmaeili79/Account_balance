function convertNumbersToArabic(e){let t=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"];return e.replace(/\d/g,e=>t[parseInt(e,10)])}function convertNumbersToArabic(e){let t=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"];return e.replace(/\d/g,e=>t[parseInt(e,10)])}function convertElementNumbersToArabic(e){"TEXTAREA"===e.tagName||"INPUT"===e.tagName?("text"===e.type||"password"===e.type||"email"===e.type||"tel"===e.type||"number"===e.type)&&(e.value=convertNumbersToArabic(e.value)):e.nodeType===Node.TEXT_NODE&&(e.textContent=convertNumbersToArabic(e.textContent))}function convertAllNumbersToArabic(){let e=document.querySelectorAll("*");e.forEach(e=>{e.childNodes.length&&e.childNodes.forEach(e=>{convertElementNumbersToArabic(e)}),convertElementNumbersToArabic(e)})}if(document.addEventListener("DOMContentLoaded",()=>{var e,t=document.getElementById("message");t&&setTimeout(function(){t.style.transition="opacity 0.8s ease-out",t.style.opacity=0,setTimeout(function(){t.style.display="none"},500)},3e3);let n=()=>{document.getElementById("current-date").textContent=new Date().toLocaleDateString("fa-IR"),document.getElementById("current-time").textContent=new Date().toLocaleTimeString("fa-IR")};if(n(),setInterval(n,1e3),document.getElementById("chartPage")){let a=["فروردین","اردیبهشت","خرداد","تیر","مرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"],l=Array(12).fill(0),o=Array(12).fill(0),i=document.getElementById("yearSelector");function r(e){fetch(`/api/transactions/?year=${e}`).then(e=>e.json()).then(e=>{if(e.error){console.error(e.error);return}l=e.income,o=e.outcome,s();let t=l.every(e=>0===e);t?document.getElementById("showOutcome").click():document.getElementById("showIncome").click()}).catch(e=>console.error("Error fetching data:",e))}function d(e){return new Intl.NumberFormat("ar-EG").format(e)}function s(){document.getElementById("showIncome").addEventListener("click",()=>{c("showIncome"),m.data.datasets[0].data=l,m.data.datasets[0].label="درآمد",m.update();let e=a.filter((e,t)=>l[t]>0),t=l.filter(e=>e>0);document.getElementById("detailsContent").innerHTML='<div class="card-container">'+e.map((e,n)=>`
                        <a href="/reports/month=${a.indexOf(e)+1}" class="card-link">
                            <div class="card">
                                <h5>${e}</h5>
                                <p>مقدار: ${d(t[n])} تومان</p>
                                <p>واریزی</p>
                            </div>
                        </a>
                    `).join("")+"</div>"}),document.getElementById("showOutcome").addEventListener("click",()=>{c("showOutcome"),m.data.datasets[0].data=o,m.data.datasets[0].label="هزینه",m.update();let e=a.filter((e,t)=>o[t]>0),t=o.filter(e=>e>0);document.getElementById("detailsContent").innerHTML='<div class="card-container">'+e.map((e,n)=>`
                        <a href="/reports/month=${a.indexOf(e)+1}" class="card-link">
                            <div class="card">
                                <h5>${e}</h5>
                                <p>مقدار: ${d(t[n])} تومان</p>
                                <p>کسری</p>
                            </div>
                        </a>
                    `).join("")+"</div>"})}function c(e){document.querySelectorAll(".btn").forEach(e=>e.classList.remove("active")),document.getElementById(e).classList.add("active")}i.addEventListener("change",()=>{let e=i.value;r(e)});let y=document.getElementById("timeSeriesChart").getContext("2d"),m=new Chart(y,{type:"line",data:{labels:a,datasets:[{label:"درآمد",data:l,fill:!1,borderColor:"rgba(75, 192, 192, 1)",tension:.1,borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,title:{display:!0,text:"مقدار (تومان)",font:{size:window.innerWidth<440?10:14,family:"Qs Iranyekan"}},ticks:{callback:e=>d(e),font:{size:window.innerWidth<440?10:14,family:"Qs Iranyekan"}}},x:{title:{display:!0,text:"ماه",font:{size:window.innerWidth<440?10:14,family:"Qs Iranyekan"}},ticks:{font:{size:window.innerWidth<440?10:14,family:"Qs Iranyekan"}}}},plugins:{legend:{labels:{font:{size:window.innerWidth<440?12:14,family:"Qs Iranyekan"}}},tooltip:{titleFont:{family:"Qs Iranyekan"},bodyFont:{family:"Qs Iranyekan"},footerFont:{family:"Qs Iranyekan"},callbacks:{label:function(e){return`${e.label}: ${d(e.raw)} تومان`}}}},animation:{duration:1e3,easing:"easeOutBounce"},onClick(e,t){if(t.length>0){let n=t[0],l=n.index;a[l],window.location.href=`reports/month=${l+1}`}}}});r(i.value)}document.getElementById("transactions-container")&&(document.getElementById("showIncome").addEventListener("click",function(){document.querySelectorAll(".transaction-card").forEach(function(e){e.style.display="none"}),document.querySelectorAll(".income").forEach(function(e){e.style.display="block"})}),document.getElementById("showOutcome").addEventListener("click",function(){document.querySelectorAll(".transaction-card").forEach(function(e){e.style.display="none"}),document.querySelectorAll(".outcome").forEach(function(e){e.style.display="block"})}),document.getElementById("addTransactionBtn")&&document.getElementById("addTransactionBtn").addEventListener("click",function(){var e=document.getElementById("transactionForm");e.style.display="none"===e.style.display?"block":"none"}),document.getElementById("showIncome").click()),document.getElementById("report-container")&&document.querySelectorAll(".btn").forEach(function(e){e.addEventListener("click",function(){document.querySelector(this.getAttribute("data-target")).classList.toggle("show")})})}),document.addEventListener("DOMContentLoaded",convertAllNumbersToArabic),document.getElementById("transactions-container"))function showConfirmModal(e){document.getElementById("modalTransactionId").value=e,document.getElementById("confirmModal").style.display="block"}if(document.getElementById("modalCatId"))function showDelete_Cat(e){document.getElementById("modalCatId").value=e,document.getElementById("confirmCatModal").style.display="block"}if(document.getElementById("transactions-container"))function closeConfirmModal(){document.getElementById("confirmModal").style.display="none"}if(document.getElementById("transactions-container"))function showEditModal(e,t,n,a,l,o){document.getElementById("editTransactionId").value=e,document.getElementById("editAmount").value=t,document.getElementById("editTransactionDate").value=n,document.getElementById("editTransactionTime").value=a,document.getElementById("editCategory").value=l,document.getElementById("editDescription").value=o,document.getElementById("editModal").style.display="block"}if(document.getElementById("editCatModal"))function showEditCatModal(e,t){document.getElementById("editCategoryId").value=e,document.getElementById("category_name").value=t,document.getElementById("editCatModal").style.display="block"}if(document.getElementById("transactions-container"))function closeEditModal(){document.getElementById("editModal").style.display="none"}if(document.getElementById("editCatModal"))function closeEditModal(){document.getElementById("editCatModal").style.display="none"}if(document.getElementById("form-input")){let e=document.querySelector("#togglePassword1"),t=document.querySelector("#password"),n=document.querySelector("#togglePassword2"),a=document.querySelector("#password2");function l(e,t){let n="password"===t.getAttribute("type")?"text":"password";t.setAttribute("type",n),e.classList.toggle("bi-eye"),e.classList.toggle("bi-eye-slash")}document.getElementById("togglePassword1")&&e.addEventListener("click",()=>{l(e,t)}),document.getElementById("togglePassword2")&&n.addEventListener("click",()=>{l(n,a)})}
